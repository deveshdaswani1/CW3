(function(){"use strict";var e={3405:function(e,t,o){var r=o(3751),s=o(641),n=o(33);const l=e=>((0,s.Qi)("data-v-0b3f2782"),e=e(),(0,s.jt)(),e),a=l((()=>(0,s.Lk)("link",{rel:"stylesheet",href:"/styles.css"},null,-1))),i={key:0},c={class:"title-bar"},d={class:"search-sort"},u={class:"search-container"},h={class:"sort-checkout-container"},p=["disabled"],m=l((()=>(0,s.Lk)("span",{class:"fa-solid fa-cart-shopping"},null,-1))),k={key:1,class:"sidebar"},f={class:"sidebar-content"},v=l((()=>(0,s.Lk)("h4",null,"Sort by:",-1))),b={class:"sort-container"},L=["id","value"],g=["for"],C={class:"ascending-descending-options"},y=l((()=>(0,s.Lk)("label",{for:"ascending",class:"ascending-label"},"Ascending",-1))),w={key:2},F={key:3,class:"cart"};function O(e,t,o,l,O,A){const _=(0,s.g2)("LessonComponent"),E=(0,s.g2)("CheckoutForm");return(0,s.uX)(),(0,s.CE)(s.FK,null,[a,(0,s.Lk)("div",null,[O.showlesson?((0,s.uX)(),(0,s.CE)("header",i,[(0,s.Lk)("div",c,[(0,s.Lk)("h1",null,(0,n.v_)(O.sitename),1),(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>O.searchQuery=e),placeholder:"Search..."},null,512),[[r.Jo,O.searchQuery]])]),(0,s.Lk)("div",h,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>A.toggleCheckout&&A.toggleCheckout(...e)),disabled:0===O.cart.length,class:"button"},[(0,s.eW)((0,n.v_)(O.cart.length)+" ",1),m,(0,s.eW)(" Checkout ")],8,p)])])])])):(0,s.Q3)("",!0),O.showlesson?((0,s.uX)(),(0,s.CE)("aside",k,[(0,s.Lk)("div",f,[v,(0,s.Lk)("div",b,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(["subject","location","price","space"],((e,o)=>(0,s.Lk)("div",{key:o},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:e,value:e,"onUpdate:modelValue":t[2]||(t[2]=e=>O.sortAttributes=e),class:"sort-checkbox"},null,8,L),[[r.lH,O.sortAttributes]]),(0,s.Lk)("label",{for:e,class:"sort-label"},(0,n.v_)(e),9,g)]))),64))]),(0,s.Lk)("div",C,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"ascending","onUpdate:modelValue":t[3]||(t[3]=e=>O.ascendingOrder=e),class:"ascending-checkbox"},null,512),[[r.lH,O.ascendingOrder]]),y])]),O.showInstallPrompt?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[4]||(t[4]=(...e)=>A.promptInstall&&A.promptInstall(...e)),class:"install-button"},"Install App")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),O.showlesson?((0,s.uX)(),(0,s.CE)("div",w,[(0,s.bF)(_,{"show-lesson":O.showlesson,"cart-count":A.cartCount,lessons:A.filteredLessons,"can-add-to-cart":A.canAddToCart,onAddToCart:A.addToCart},null,8,["show-lesson","cart-count","lessons","can-add-to-cart","onAddToCart"])])):((0,s.uX)(),(0,s.CE)("div",F,[(0,s.bF)(E,{cartCount:A.cartCount,orderSubmitted:O.orderSubmitted,onSaveOrder:A.saveOrder,onRemoveItemFromCart:A.removeFromCart,cart:O.cart},null,8,["cartCount","orderSubmitted","onSaveOrder","onRemoveItemFromCart","cart"])])),O.showInstallPrompt?((0,s.uX)(),(0,s.CE)("button",{key:4,onClick:t[5]||(t[5]=(...e)=>A.promptInstall&&A.promptInstall(...e)),class:"install-button"},"Install App")):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"button cart-toggle-button",onClick:t[6]||(t[6]=(...e)=>A.toggleCheckout&&A.toggleCheckout(...e))},(0,n.v_)(O.showlesson?"View Cart":"Back to Lessons"),1)])],64)}o(4114);const A=e=>((0,s.Qi)("data-v-1df48aef"),e=e(),(0,s.jt)(),e),_={class:"checkout-form"},E={class:"checkout"},I=A((()=>(0,s.Lk)("h2",null,"Checkout",-1))),P=A((()=>(0,s.Lk)("strong",null,"First Name:",-1))),N=A((()=>(0,s.Lk)("strong",null,"Last Name:",-1))),S=A((()=>(0,s.Lk)("strong",null,"Phone:",-1))),X={key:0,style:{color:"red"}},Q=A((()=>(0,s.Lk)("h2",null,"Order Information",-1))),j=["disabled"],T={key:1},x={class:"cart"},V=A((()=>(0,s.Lk)("h2",null,"Shopping Cart",-1))),U={class:"cart-list"},W={class:"cart-item"},J=["src"],$={class:"product-details"},q=A((()=>(0,s.Lk)("strong",null,"Location:",-1))),K=A((()=>(0,s.Lk)("strong",null,"Price:",-1))),R=A((()=>(0,s.Lk)("strong",null,"Slots Available:",-1))),B=["onClick"];function H(e,t,o,l,a,i){return(0,s.uX)(),(0,s.CE)("div",_,[(0,s.Lk)("div",E,[I,(0,s.Lk)("p",null,[P,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.order.firstName=e)},null,512),[[r.Jo,a.order.firstName,void 0,{trim:!0}]])]),(0,s.Lk)("p",null,[N,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.order.lastName=e)},null,512),[[r.Jo,a.order.lastName,void 0,{trim:!0}]])]),(0,s.Lk)("p",null,[S,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.order.phone=e),type:"tel"},null,512),[[r.Jo,a.order.phone,void 0,{number:!0}]])]),a.isFormValid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("p",X,"Please fill in all fields.")),Q,(0,s.Lk)("p",null,"First Name: "+(0,n.v_)(a.order.firstName),1),(0,s.Lk)("p",null,"Last Name: "+(0,n.v_)(a.order.lastName),1),(0,s.Lk)("p",null,"Phone Number: "+(0,n.v_)(a.order.phone),1),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.submitOrder&&i.submitOrder(...e)),disabled:!a.isFormValid},"Place Order",8,j),o.orderSubmitted?((0,s.uX)(),(0,s.CE)("p",T,"Order Submitted!")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",x,[V,(0,s.Lk)("ul",U,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.cart,((e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},[(0,s.Lk)("div",W,[(0,s.Lk)("figure",null,[(0,s.Lk)("img",{src:e.image,alt:"Product Image"},null,8,J)]),(0,s.Lk)("div",$,[(0,s.Lk)("h3",null,(0,n.v_)(e.title),1),(0,s.Lk)("p",null,[q,(0,s.eW)(" "+(0,n.v_)(e.Location),1)]),(0,s.Lk)("p",null,[K,(0,s.eW)(" "+(0,n.v_)(e.price),1)]),(0,s.Lk)("p",null,[R,(0,s.eW)(" "+(0,n.v_)(e.space),1)])]),(0,s.Lk)("button",{onClick:t=>i.removeFromCart(e.id),class:"remove-button"},"Remove",8,B)])])))),128))])])])}var D={name:"CheckoutForm",props:["cart","save-order","orderSubmitted","cartCount"],data(){return{order:{firstName:"",lastName:"",phone:""},isFormValid:!1}},watch:{order:{handler(){this.validateForm()},deep:!0}},methods:{validateForm(){this.isFormValid=!!this.order.firstName&&!!this.order.lastName&&!!this.order.phone},submitOrder(){this.isFormValid&&(this.order.cartProduct=this.cart,this.$emit("save-order",this.order))},removeFromCart(e){this.$emit("remove-item-from-cart",e)}}},z=o(6262);const G=(0,z.A)(D,[["render",H],["__scopeId","data-v-1df48aef"]]);var M=G;const Y=e=>((0,s.Qi)("data-v-066aa0f4"),e=e(),(0,s.jt)(),e),Z={id:"main-wrapper"},ee={class:"product-container"},te=["src"],oe={class:"lesson-details"},re=["onClick"],se=Y((()=>(0,s.Lk)("br",null,null,-1))),ne=Y((()=>(0,s.Lk)("br",null,null,-1))),le={key:0},ae={key:1},ie={key:2};function ce(e,t,o,r,l,a){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("main",Z,[(0,s.Lk)("div",ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.lessons,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"product",key:t},[(0,s.Lk)("figure",null,[(0,s.Lk)("img",{src:e.image,alt:"Lesson Image"},null,8,te)]),(0,s.Lk)("div",oe,[(0,s.Lk)("h2",null,(0,n.v_)(e.title),1),(0,s.Lk)("p",null,"Location: "+(0,n.v_)(e.location),1),(0,s.Lk)("p",null,"Price: "+(0,n.v_)(e.price),1),(0,s.Lk)("p",null,"Slots Available: "+(0,n.v_)(e.space),1),(0,s.Lk)("button",{class:"success-button",style:{"background-color":"gold"},onClick:t=>a.addLessonToCart(e)}," Add to Cart ",8,re),se,ne,0===e.space?((0,s.uX)(),(0,s.CE)("span",le,"All out!")):e.space<5?((0,s.uX)(),(0,s.CE)("span",ae,"Only "+(0,n.v_)(e.space-o.cartCount(e.id))+" left!",1)):((0,s.uX)(),(0,s.CE)("span",ie,"Buy Now!"))])])))),128))])])])}var de={name:"LessonComponent",props:{lessons:{type:Array,required:!0},"add-to-cart":{},canAddToCart:{type:Function,required:!0},cartCount:{type:Function,required:!0}},data(){return{}},computed:{},methods:{addLessonToCart(e){this.$emit("add-to-cart",e)}}};const ue=(0,z.A)(de,[["render",ce],["__scopeId","data-v-066aa0f4"]]);var he=ue,pe={name:"App",components:{CheckoutForm:M,LessonComponent:he},data(){return{sitename:"Radiant Sports Academy ",lessons:[],cart:[],searchQuery:"",showlesson:!0,sortAttributes:[],ascendingOrder:!1,showShoppingCart:!1,showCheckout:!1,orderSubmitted:!1,baseUrl:"https://cw2-backend-brs7.onrender.com",showInstallPrompt:!1,deferredPrompt:null}},created(){this.fetchLessons(),window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),this.deferredPrompt=e,this.showInstallPrompt=!0}))},methods:{fetchLessons(){fetch(`${this.baseUrl}/lesson`).then((e=>e.json())).then((e=>{this.lessons=e})).catch((e=>{console.error("Error fetching lessons:",e)}))},saveOrder(e){fetch(`${this.baseUrl}/collection/order/confrimorder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{alert("Order saved:",e),this.orderSubmitted=!0,this.showlesson=!0,this.cart.length=0})).catch((e=>{console.error("Error saving order:",e)}))},addToCart(e){if(console.log(this.cart),this.canAddToCart(e)){const t=this.lessons.findIndex((t=>t._id===e._id));-1!==t&&(this.lessons[t].space--,this.cart.push({...e}))}},canAddToCart(e){return e.space>0},cartCount(e){return this.cart.filter((t=>t._id===e)).length},toggleCheckout(){this.showlesson=!this.showlesson},removeFromCart(e){const t=this.cart.findIndex((t=>t.id===e));if(-1!==t){const o=this.lessons.findIndex((t=>t.id===e));-1!==o&&this.lessons[o].space++,this.cart.splice(t,1)}},promptInstall(){this.deferredPrompt&&(this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then((e=>{"accepted"===e.outcome?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),this.deferredPrompt=null,this.showInstallPrompt=!1})))}},computed:{filteredLessons(){return console.log(this.sortAttributes),this.sortAttributes.length>0&&this.sortAttributes.forEach((e=>{function t(t,o){return t[e]>o[e]?1:t[e]<o[e]?-1:0}this.ascendingOrder?this.lessons.sort(t):this.lessons.sort(t).reverse()})),this.searchQuery.length>1?this.lessons.filter((e=>e.title&&e.title.toLowerCase().includes(this.searchQuery)||e.Location&&e.Location.toLowerCase().includes(this.searchQuery))):this.lessons}}};const me=(0,z.A)(pe,[["render",O],["__scopeId","data-v-0b3f2782"]]);var ke=me,fe=o(3723);(0,fe.k)("/CW3/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,r.Ef)(ke).mount("#app")}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,s,n){if(!r){var l=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],n=e[d][2];for(var a=!0,i=0;i<r.length;i++)(!1&n||l>=n)&&Object.keys(o.O).every((function(e){return o.O[e](r[i])}))?r.splice(i--,1):(a=!1,n<l&&(l=n));if(a){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,s,n]}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,n,l=r[0],a=r[1],i=r[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(i)var d=i(o)}for(t&&t(r);c<l.length;c++)n=l[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(d)},r=self["webpackChunkcoursework_app"]=self["webpackChunkcoursework_app"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(3405)}));r=o.O(r)})();
//# sourceMappingURL=app.6158056d.js.map